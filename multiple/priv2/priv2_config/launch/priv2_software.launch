<?xml version="1.0" encoding="UTF-8"?>
<launch>

   <arg name="localization_type" default="AMCL"/>
<param name="/use_sim_time" value="true"/>
		
         <!-- Run the map server -->
	<arg name="map_file" default="$(find priv2)/priv2_2dnav/maps/map.yaml"/>
	<node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" >
	<param name="frame_id" value="map1" />
	</node>
	
     <!-- gmapping -->
    <node if="$(eval localization_type == 'GMAPPING')" pkg="gmapping" type="slam_gmapping" name="gmapping" output="screen">                
        <param name="base_frame" value="base_footprint"/>
	<param name="odom_frame" value="odom"/>
	<param name="map_frame" value="map1"/>
        <param name="maxURange" value="80"/>
	<param name="maxRange" value="80"/>
	<param name="map_update_interval" value="2"/>
	<param name="delta" value="0.01"/>
	<param name="ymax" value="1.7"/>
	<param name="xmax" value="5"/>
	<param name="ymin" value="-3.1"/>
	<param name="xmin" value="-3.5"/>       
        <remap from="scan" to="/priv2/laser/scan"/>        
    </node>


	<group ns="robot1">
    <param name="tf_prefix" value="robot1_tf" />
    <param name="amcl/initial_pose_x" value="0" />
    <param name="amcl/initial_pose_y" value="0" />
    <include file="$(find priv2)/priv2_2dnav/launch/priv2_move_base_1.launch" />
    <include file="$(find priv2)/priv2_2dnav/launch/amcl_robot1.launch" />
  </group>

	<group ns="robot2">
    <param name="tf_prefix" value="robot2_tf" />
    <param name="amcl/initial_pose_x" value="-1" />
    <param name="amcl/initial_pose_y" value="0" />
    <include file="$(find priv2)/priv2_2dnav/launch/priv2_move_base_2.launch" />
    <include file="$(find priv2)/priv2_2dnav/launch/amcl_robot2.launch" />
  </group>

   
</launch>
